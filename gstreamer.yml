name: gstreamer
buildsystem: meson
builddir: true
config-opts:
  - --buildtype=release
  - --wrap-mode=nodownload

  - -Dbad=enabled
  - -Ddevtools=disabled
  - -Ddoc=disabled
  - -Dexamples=disabled
  - -Dges=disabled
  - -Dgpl=enabled
  - -Dgst-examples=disabled
  - -Dgtk_doc=disabled
  - -Dlibav=enabled
  - -Dpython=disabled
  - -Dqt5=disabled
  - -Drtsp_server=disabled
  - -Dtests=disabled
  - -Dtools=disabled
  - -Dugly=enabled

  - -Dgstreamer:check=disabled

  - -Dgst-plugins-base:ogg=enabled
  - -Dgst-plugins-base:opus=enabled
  - -Dgst-plugins-base:vorbis=enabled

  - -Dgst-plugins-good:bz2=enabled
  - -Dgst-plugins-good:dv=enabled
  - -Dgst-plugins-good:flac=enabled
  - -Dgst-plugins-good:gtk3=disabled
  - -Dgst-plugins-good:mpg123=enabled
  - -Dgst-plugins-good:pulse=enabled
  - -Dgst-plugins-good:speex=enabled
  - -Dgst-plugins-good:vpx=enabled
  - -Dgst-plugins-good:wavpack=enabled
  - -Dgst-plugins-good:qt6=disabled

  - -Dgst-plugins-ugly:a52dec=enabled
  - -Dgst-plugins-ugly:mpeg2dec=enabled

  - -Dgst-plugins-bad:aom=enabled
  - -Dgst-plugins-bad:assrender=enabled
  - -Dgst-plugins-bad:bz2=enabled
  - -Dgst-plugins-bad:closedcaption=enabled
  - -Dgst-plugins-bad:dash=enabled
  - -Dgst-plugins-bad:dtls=enabled
  - -Dgst-plugins-bad:dts=enabled
  - -Dgst-plugins-bad:faad=enabled
  - -Dgst-plugins-bad:fluidsynth=enabled
  - -Dgst-plugins-bad:gl=enabled
  - -Dgst-plugins-bad:ldac=enabled
  - -Dgst-plugins-bad:libde265=enabled
  - -Dgst-plugins-bad:nvcodec=enabled
  - -Dgst-plugins-bad:openh264=enabled
  - -Dgst-plugins-bad:openjpeg=enabled
  - -Dgst-plugins-bad:opus=enabled
  - -Dgst-plugins-bad:ttml=enabled
  - -Dgst-plugins-bad:va=enabled

  - -Dorc:benchmarks=disabled
  - -Dorc:orc-test=disabled

build-options:
  arch:
      x86_64:
        config-opts:
          - -Dgst-plugins-bad:qsv=enabled

sources:
  - type: archive
    url: https://gitlab.freedesktop.org/gstreamer/gstreamer/-/archive/1.24.8/gstreamer-1.24.8.tar.bz2
    sha256: 41fd1325acebb69cec23a46c6c2fe68b4bcf9b25c392b94ffadb3b222bb2422b

  - type: archive
    url: https://gitlab.freedesktop.org/gstreamer/meson-ports/gl-headers/-/archive/5c8c7c0d3ca1f0b783272dac0b95e09414e49bc8/gl-headers-5c8c7c0d3ca1f0b783272dac0b95e09414e49bc8.tar.bz2
    sha256: 46b771874c9e14c2a94575eaf579877f34060950f7090e50b2b91f22399700a3
    dest: subprojects/gl-headers

  - type: archive
    url: https://gitlab.freedesktop.org/gstreamer/orc/-/archive/0.4.40/orc-0.4.40.tar.bz2
    sha256: cee70f3c101ecd78ed3e400c32d62d2202dadb1cb13f0e7f32ade4b8d6f740e9
    dest: subprojects/orc

  - type: archive
    url: https://gitlab.freedesktop.org/gstreamer/meson-ports/libdv/-/archive/4a28ebb4/libdv-4a28ebb4.tar.bz2
    sha256: 23f608ae1db094ac4a8af8ab61b2c20e33ca5518c1e7c2b82d4a4cf8b698ff8f
    dest: subprojects/dv

modules:
  - name: faad2
    buildsystem: cmake
    sources:
      - type: archive
        url: https://github.com/knik0/faad2/archive/2.11.1.tar.gz
        sha256: 72dbc0494de9ee38d240f670eccf2b10ef715fd0508c305532ca3def3225bb06

  - name: libde265
    buildsystem: autotools
    sources:
      - type: archive
        url: https://github.com/strukturag/libde265/releases/download/v1.0.15/libde265-1.0.15.tar.gz
        sha256: 00251986c29d34d3af7117ed05874950c875dd9292d016be29d3b3762666511d
    config-opts:
      - --disable-dec265
      - --disable-sherlock265

  - name: mjpegtools
    buildsystem: autotools
    sources:
      - type: archive
        url: https://downloads.sourceforge.net/mjpeg/mjpegtools-2.2.1.tar.gz
        sha256: b180536d7d9960b05e0023a197b00dcb100929a49aab71d19d55f4a1b210f49a

  - name: soundtouch
    buildsystem: autotools
    sources:
      - type: archive
        url: https://codeberg.org/soundtouch/soundtouch/archive/2.3.3.tar.gz
        sha256: 43b23dfac2f64a3aff55d64be096ffc7b73842c3f5665caff44975633a975a99

  - name: a52dec
    buildsystem: autotools
    sources:
      - type: archive
        url: https://distfiles.adelielinux.org/source/a52dec/a52dec-0.8.0.tar.gz
        sha256: 03c181ce9c3fe0d2f5130de18dab9bd8bc63c354071515aa56983c74a9cffcc9

  - name: opencore-amr
    buildsystem: autotools
    sources:
      - type: archive
        url: https://downloads.sourceforge.net/sourceforge/opencore-amr/opencore-amr-0.1.6.tar.gz
        sha512: 8955169954b09d2d5e2190888602c75771b72455290db131ab7f40b587df32ea6a60f205126b09193b90064d0fd82b7d678032e2b4c684189788e175b83d0aa7

  - name: libmpeg2
    buildsystem: autotools
    sources:
      - type: archive
        url: https://libmpeg2.sourceforge.io/files/libmpeg2-0.5.1.tar.gz
        sha256: dee22e893cb5fc2b2b6ebd60b88478ab8556cb3b93f9a0d7ce8f3b61851871d4

      - type: file
        path: autotools/config.guess
        dest: .auto/

      - type: file
        path: autotools/config.sub
        dest: .auto/

  - name: libass
    buildsystem: autotools
    sources:
      - type: archive
        url: https://github.com/libass/libass/releases/download/0.17.3/libass-0.17.3.tar.xz
        sha256: eae425da50f0015c21f7b3a9c7262a910f0218af469e22e2931462fed3c50959

  - name: libdca
    buildsystem: autotools
    sources:
      - type: archive
        url: https://download.videolan.org/pub/videolan/libdca/0.0.7/libdca-0.0.7.tar.bz2
        sha256: 3a0b13815f582c661d2388ffcabc2f1ea82f471783c400f765f2ec6c81065f6a

  - name: fluidsynth
    buildsystem: cmake
    sources:
      - type: archive
        url: https://github.com/FluidSynth/fluidsynth/archive/refs/tags/v2.3.6.tar.gz
        sha256: 3340d73286b28fe6e5150fbe12648d4640e86c64c228878b572773bd08cac531

  - name: ldacBT
    buildsystem: cmake
    sources:
      - type: archive
        url: https://github.com/EHfive/ldacBT/releases/download/v2.0.2.3/ldacBT-2.0.2.3.tar.gz
        sha256: 4bd8eece78bb5c1361fab95743e7100506e2408a25c4a592a0f8d349746dc5b4

  - name: intel-onevpl-runtime
    only-arches:
      - x86_64
    buildsystem: cmake-ninja
    builddir: true
    config-opts:
      - '-DCMAKE_BUILD_TYPE=Release'
      - '-DBUILD_SAMPLES=OFF'
      - '-DBUILD_TESTS=OFF'
      - '-DBUILD_TOOLS=OFF'
    sources:
      - type: archive
        url: https://github.com/intel/vpl-gpu-rt/archive/refs/tags/intel-onevpl-24.2.5.tar.gz
        sha256: ccb76812642d84d4d8a56d28df60ef6d450cbb09969a59ee6c4a819098617b5d

  - name: intel-libvpl
    skip-arches:
      - aarch64
    buildsystem: cmake-ninja
    builddir: true
    config-opts:
      - '-DCMAKE_BUILD_TYPE=Release'
      - '-DBUILD_SAMPLES=OFF'
      - '-DBUILD_TESTS=OFF'
      - '-DBUILD_TOOLS=OFF'
    sources:
      - type: archive
        url: https://github.com/intel/libvpl/archive/refs/tags/v2.13.0.tar.gz
        sha256: 1c740e2b58f7853f56b618bdb7d4a7e5d37f8c1a9b30105a0b79ba80873e1cbd
